{% extends "base.html" %}

{% block title %}授权管理 - {{ user.username }}{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/authorized_apps.css') }}" rel="stylesheet">
{% endblock %}

{% block header %}
<div class="page-header">
    <h1><i class="fas fa-shield-alt"></i> 授权管理</h1>
    <p>查看和管理您已授权的第三方应用，控制它们对您数据的访问权限</p>
    <div class="stats">
        <div class="stat-item">
            <span class="stat-number" id="total-apps-count">0</span>
            <span class="stat-label">已授权应用</span>
        </div>
        <div class="stat-item">
            <span class="stat-number" id="active-apps-count">0</span>
            <span class="stat-label">活跃应用</span>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<!-- Apps Container -->
<div id="apps-container">
    <!-- Loading State -->
    <div class="loading" id="loading-state">
        <div class="loading-spinner"></div>
        <p>正在加载您的授权应用...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="empty-state" style="display: none;">
        <i class="fas fa-user-shield"></i>
        <h3>暂无授权应用</h3>
        <p>您还没有授权任何第三方应用访问您的账户</p>
        <p>当您使用第三方应用登录时，它们会出现在这里</p>
    </div>

    <!-- Apps Grid -->
    <div class="apps-grid" id="apps-grid" style="display: none;"></div>
</div>

<!-- Data Management Modal -->
<div id="data-management-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-database"></i> 数据管理</h2>
            <span class="close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- Modal content will be loaded here -->
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/authorized_apps.js') }}"></script>
{% endblock %}